function initPlaid(params){var options=$.extend({url:"/Calendar/ExchangePlaidToken",onSuccess:function(){},urlParams:{}},params);return Plaid.create({apiVersion:"v2",selectAccount:!0,env:"production",clientName:"LiquidSpace",key:"bf7e2ae4145508ea0340fc2d560cd6",product:["auth"],onLoad:function(){},onSuccess:function(public_token,metadata){LSHelper.HelperLib.blockUI();var url=options.url+"?publicToken="+public_token+"&accountId="+metadata.account_id;options.urlParams&&(url+="&"+$.param(options.urlParams));$.ajax({type:"GET",url:url,success:function(result){if(result&&!result.success){LSHelper.Dialog.confirmDialog(result.error,function(){},"Account linking failed.");return}if(options.onSuccess)options.onSuccess(result.last4)},complete:function(){LSHelper.HelperLib.unblockUI()}})},onExit:function(){}})}function applyButtonPermissions(){$("button.permission-pending").button({disabled:!0,label:"Permission Pending"});$("button.permission-denied").button({disabled:!0,label:"Permission Denied"});$("button.unavailable").button({disabled:!0,label:"Not Available"});$("button.permission-pending, button.permission-denied, button.unavailable").width("auto").height("auto")}function isTouchDevice(){return"ontouchstart"in window||"msmaxtouchpoints"in window.navigator}function initUI(){applyButtonPermissions();$("button:not(.mapboxgl-ctrl-icon), input:submit, input:button, .dhx_btn_set").button();$(".date_time").datepicker({option:$.datepicker.regional["en-US"],dateFormat:"m/d/yy",showOn:"button",buttonImage:"https://content.liquidspace.com/images/icons/calendar-icon.png?v=18032719327085160717",buttonImageOnly:!0,onSelect:function(){$("form").each(function(id,data){$(data).valid()})}})}function GetUrl(action,controller){return("//"+controller+"/"+action).replace(/\/+/,"/")}function stopRKey(evt){var evt=evt?evt:event?event:null,node=evt.target?evt.target:evt.srcElement?evt.srcElement:null;if(evt.keyCode==13&&node.type=="text")return!1}window.UseMapbox=!0;document.function_SSO_accountLinking_Completed=function(ns,errors){$(document).trigger("SSO_accountLinking_Completed."+ns,[errors]);$(document).trigger("SSO_accountLinking_Completed",{sso:ns,errors:errors})};mobileDeviceType="Unsupported";var LSHelperDependentInit=function(){var vgid=LSHelper.HelperLib.getUrlVars().vgid;vgid!=null&&LSHelper.sessionStorage.set("ExclusiveHotelsVenueGroupId",vgid);LSHelper.SessionCoupon.trackCoupon();($.cookie("__lsreferrer")==null||$.cookie("__lsreferrer").length==0)&&$.cookie("__lsreferrer",encodeURIComponent(document.referrer));isTouchDevice()&&$("html").addClass("touch");initUI();window.onBeforeunload=function(){LSHelper.HelperLib.blockUI()};$(window).on("unload",function(){LSHelper.HelperLib.unblockUI()});window.onload=function(){window.handleBackButton&&window.handleBackButton(!1)};$(document).ajaxError(function(e,xhr){var response,obj,tokenExpiredCode;if(xhr!=undefined&&!xhr._exceptionProcessed)if(xhr.status==530)if(typeof document.notLoggedInCallBack!="undefined"&&document.notLoggedInCallBack!=null&&$.isFunction(document.notLoggedInCallBack))document.notLoggedInCallBack();else try{response=JSON.parse(xhr.responseText);window.location=response&&response.RedirectTo?response.RedirectTo:xhr.responseText}catch(ex){window.location=xhr.responseText}else if(xhr.status==540)try{response=JSON.parse(xhr.responseText);window.location=response&&response.RedirectTo?response.RedirectTo:xhr.responseText}catch(ex){window.location=xhr.responseText}else{$.unblockUI();obj=null;try{obj=xhr.responseText&&JSON.parse(xhr.responseText)}catch(e){DEBUG&&console.log(e)}xhr.status!=404&&xhr.status!=0&&(tokenExpiredCode=1,obj!=null&&obj.code&&obj.code==tokenExpiredCode?LSHelper.Sso.popupSsoLogin("/"+obj.url,700,350):obj!=null&&LSHelper.UI.showError(obj))}});$(document).ajaxStop(function(){initUI()});$.ajaxSetup({cache:!1,async:!0})},waitLSHelperCount=0,waitLSHelper=function(){if(LSHelper)LSHelperDependentInit();else if(waitLSHelperCount++<3)setTimeout(waitLSHelper,500);else throw"LSHelper not found";};$(waitLSHelper);document.onkeypress=stopRKey;$.browser||($.browser={},$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()))