typeof LiquidSpace=="undefined"&&(LiquidSpace={});typeof LiquidSpace.View=="undefined"&&(LiquidSpace.View={});CalculatorDropdown=function(options,defaultOption,containerId){var _self=this;_self.options=options;_self.optionSelected=ko.observable(defaultOption?defaultOption:_self.options[0]);_self.expanded=ko.observable(!1);_self.toggle=function(){var newVal=!_self.expanded();_self.expanded(newVal)};_self.selectOption=function(){_self.optionSelected(this)};$(document).mouseup(function(event){_self.expanded(!1)})};LiquidSpace.View.PriceCalculatorViewModel=function(params){var _self=this,calcPrice,formatMoney,testFunction;User&&User.isSuperUser&&(params.SupportedCountries=[]);this.allowInternational=params.SupportedCountries&&!params.SupportedCountries.length;var furnitureOptions=[{val:!0,text:"Furnished"},{val:!1,text:"Unfurnished"}],getSpaceCapacities=function(){var spaceCapacities=[{val:1,text:"1 person"}];for(i=2;i<31;i++)spaceCapacities.push({val:i,text:i.toString()+" people"});return spaceCapacities},terms=[{val:"YEAR",text:"Per year"},{val:"MONTH",text:"Per month"}];return _self.spaceTypes=["Desks","Office"],_self.neighborhoodSelected=ko.observable(null),calcPrice=function(basePrice,multiplier,capacity,isFurnished,term){var sum=null;return basePrice!==null&&multiplier!==null&&(sum=basePrice+(capacity-1)*multiplier,isFurnished||(sum=sum*.7),term=="YEAR"&&(sum=sum*12)),sum},formatMoney=function(n,currency){var amount=n.toFixed(0).replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return currency+amount.replace(/\B(?=(\d{3})+(?!\d))/g,",")},_self.showCalculator=ko.observable(!1),_self.priceCalculated=ko.computed(function(){var result=null,neighborhood=_self.neighborhoodSelected();if(neighborhood!=null){var capacity=_self.capacityDropdown.optionSelected().val,isFurnished=_self.furnitureDropdown.optionSelected().val,term=_self.termDropdown.optionSelected().val,spacetype=_self.selectedSpaceType();spacetype=="Desks"&&(result=calcPrice(neighborhood.DeskPersonMultiplier,neighborhood.DeskPersonMultiplier,capacity,isFurnished,term));spacetype=="Office"&&(result=calcPrice(neighborhood.OfficeBasePrice,neighborhood.OfficePersonMultiplier,capacity,isFurnished,term))}return result!==null?_self.showCalculator(!0):_self.showCalculator(!1),result!=null?formatMoney(result,"$"):null}),_self.markets=params.Markets,_self.neighborhoods=params.Neighborhoods,_self.isAuthenticated=params.IsAuthenticated,_self.PortfolioId=params.PortfolioId,_self.isSignupLandingPage=params.IsSignupLandingPage||!1,_self.Location=ko.observable(params.Address),_self.SelectedLocation=null,_self.LocationResponse=ko.observable(null),_self.capacityDropdown=new CalculatorDropdown(getSpaceCapacities(),{val:4,text:"4 people"}),_self.furnitureDropdown=new CalculatorDropdown(furnitureOptions),_self.termDropdown=new CalculatorDropdown(terms),_self.placeholder=_self.isSignupLandingPage?"Where is your office located?":"Street address",_self.ctaText=_self.isSignupLandingPage?"Start Now":"Start for Free",_self.selectedSpaceType=ko.observable("Desks"),_self.changeSpaceType=function(){_self.selectedSpaceType(this)},_self.step=ko.observable(0),_self.dialogStep=ko.observable(0),_self.locationConfigured=ko.observable(!1),_self.message=ko.observable(null),_self.suggestedAddressSelected=ko.observable(!1),_self.geocoder=new LiquidSpace.Geocoder,_self.fullAddressEntered=ko.observable(!1),_self.isValidLocation=ko.observable(!0),_self.locations=ko.observableArray([]),_self.showLocations=ko.observable(!1),_self.showLocations.subscribe(function(newValue){newValue||_self.autocompleteSelectedOptionIndex(-1)}),_self.selectLocation=function(data,event){_self.Location(data.description);_self.suggestedAddressSelected(!0);_self.SelectedLocation=data.description;var zip=_self.processLocationSelected(data);_self.showLocations(!1)},$(document).mouseup(function(event){var target=$(event.target);target&&target.length&&target.hasClass("cta-btn")||_self.showLocations(!1)}),_self.timeout=null,_self.autocompleteSelectedOptionIndex=ko.observable(-1),_self.autoCompleteKeyboardHander=function(data,event){var totalOptions,keycode,currentIndex;if(_self.showLocations()&&(totalOptions=_self.locations().length,totalOptions)){if(keycode=event.keyCode?event.keyCode:event.which?event.which:event.charCode,currentIndex=_self.autocompleteSelectedOptionIndex(),keycode==13)return currentIndex<totalOptions&&currentIndex>-1&&_self.selectLocation(_self.locations()[currentIndex],event),!0;if(keycode==38)return _self.autocompleteSelectedOptionIndex(currentIndex>0?currentIndex-1:totalOptions-1),!0;if(keycode==40)return _self.autocompleteSelectedOptionIndex(currentIndex<totalOptions-1?currentIndex+1:0),!0}},_self.checkOptionsVisibility=function(){var zip=null,loc=_self.locBuffer,locationIsNotEmpty;loc!=_self.SelectedLocation&&_self.suggestedAddressSelected(!1);locationIsNotEmpty=loc&&loc.length>0;_self.geocoder&&locationIsNotEmpty&&(_self.locations([]),_self.geocoder.getPlacePredictions({input:loc,countries:params.SupportedCountries,allowInternational:_self.allowInternational},function(response,status){status=="OK"&&response.length>0&&_self.locations(response);_self.showLocations(!_self.suggestedAddressSelected()&&_self.locations().length)}));_self.timeout=null},_self.processLocationSelected=function(location){return location.place_id&&location.place_id.length>0&&(_self.geocoder.getDetails({placeId:location.place_id},function(result,status){status=="OK"&&(_self.LocationResponse(result),_self.setEnoughAddressFlag(_self.LocationResponse()))}),_self.setEnoughAddressFlag(null)),null},_self.setEnoughAddressFlag=function(location){var flag=!1;location&&(flag=location.address_components.some(function(a){return a.types.some(function(t){return t=="administrative_area_level_2"||t=="locality"})})||location.types.some(function(a){return a=="establishment"}));flag&&_self.isValidLocation(!0);_self.fullAddressEntered(flag)},_self.getCountryFromLocation=function(location){if(location.address_components.length>0)for(i=0;i<location.address_components.length;i++){var component=location.address_components[i];if(component.types.length>0&&component.types.indexOf("country")>-1)return zip=component.short_name}return null},testFunction=function(neighborhoods){var result=!1;return neighborhoods.length>0&&(_self.locationConfigured(!0),_self.neighborhoodSelected(neighborhoods[0]),result=!0),result},_self.toggleConfiguredFlag=function(zip,location){if(zip){zip=zip.toString();var neighborhoods=_self.neighborhoods.filter(function(element,index){return element.ZipCodes[zip]});if(testFunction(neighborhoods))return;if(neighborhoods=_self.markets.filter(function(element,index){return element.ZipCodes[zip]}),testFunction(neighborhoods))return}location&&(neighborhoods=_self.markets.filter(function(element,index){var matches=location.match(new RegExp(element.Name,"i"));return matches&&matches.length>0}),testFunction(neighborhoods))||(_self.locationConfigured(!1),_self.neighborhoodSelected(null))},_self.locBuffer=null,_self.locationChangedMethod=function(newValue){_self.locBuffer=newValue;clearTimeout(_self.timeout);_self.timeout=setTimeout(_self.checkOptionsVisibility,300)},_self.Location.subscribe(_self.locationChangedMethod),_self.locationChangedHandler=function(data,event){var newValue=$(event.target).val();_self.locationChangedMethod(newValue)},_self.getStarted=function(){_self.fullAddressEntered()&&_self.suggestedAddressSelected()?(_self.isValidLocation(!0),_self.showLocations(!1),$(document).scrollTop(0),_self.open()):_self.isValidLocation(!1)},_self.open=function(){_self.setMessage(null);_self.getInfo(function(result){var message=null;result.success&&result.count>0&&result.marketName&&(message="There are <b>"+result.count+" companies<\/b> actively looking for a space like yours in "+result.marketName+".",_self.setMessage(message))});_self.isAuthenticated?(popupModel.objectToConfirm=_self.getDataToConfirm(),popupModel.loginSuccess(null)):popupModel.openDialog(null,_self.getDataToConfirm())},_self.setMessage=function(message){popupModel.popUpMessage(message)},_self.close=function(){_self.faded(!0);setTimeout(function(){_self.visible(!1)},500)},_self.resetForm=function(){_self.dialogStep(0);_self.showValidationErrors(!1)},_self.getInfo=function(callback){var data={neighborhoodId:_self.neighborhoodSelected()!=null?_self.neighborhoodSelected().Id:null};$.ajax({type:"GET",url:"/PriceCalculator/GetInfo",data:data,success:callback})},_self.getDataToConfirm=function(){var data={Location:_self.Location(),PortfolioId:_self.PortfolioId},locResp=_self.LocationResponse();return data.LocationResponse=JSON.stringify({address_components:locResp.address_components,formatted_address:locResp.formatted_address,geometry:{location:{lat:locResp.geometry.location.lat,lng:locResp.geometry.location.lng}},types:locResp.types}),data},params.Address&&LSHelper.google.init(function(){_self.locBuffer=params.Address;_self.checkOptionsVisibility();_self.geocoder.getPlacePredictions({input:params.Address,countries:params.SupportedCountries,allowInternational:_self.allowInternational},function(response,status){var selectedLocation,zip;status=="OK"&&response.length>0&&(_self.locations(response),_self.showLocations(_self.locations().length),selectedLocation=response.find(function(r){return r.description==params.Address}),selectedLocation&&(_self.Location(selectedLocation.description),_self.suggestedAddressSelected(!0),_self.SelectedLocation=selectedLocation.description,zip=_self.processLocationSelected(selectedLocation)))})}),_self};typeof Home=="undefined"&&(Home={});Home.IndexViewModel=function(params){var _self=this,rssLimit,successStoriesCount,setElementsVisibleCounts,setElementsVisibleCountsHandler,joinWithProfession;params=$.extend({city:null,brokerSignupUrl:null,investorSignupUrl:null,shareSpaceUrl:null,PriceCalculatorModel:null,SearchConfiguration:{},loadWorkspaces:!0},params);this.city=ko.observable(params.city);this.availableWorkspaces=ko.observableArray([]);this.availableWorkspacesSearchUrl=ko.observable();rssLimit=6;this.rssEntries=ko.observableArray([]);this.mode=ko.observable("find");this.successStoryIndex=ko.observable(0);this.rssIndex=ko.observable(0);this.successStoryCss=ko.computed(function(){for(var result={},i=0;i<4;i++)result["success-story-"+i]=_self.successStoryIndex()==i;return result});this.rssFeedCss=ko.computed(function(){for(var result={},i=0;i<rssLimit;i++)result["rss-feed-"+i]=_self.rssIndex()==i;return result});successStoriesCount=$(".success-story-wrapper").length;this.successStoryVisibleCount=ko.observable(3);this.rssVisibleCount=ko.observable(3);setElementsVisibleCounts=function(){var successStoriesCount=~~($(".success-stories-wrapper").width()/$(".success-story-wrapper").width()),rssCount=~~($(".rss-feed").width()/$(".rss-item").width());_self.successStoryVisibleCount(successStoriesCount);_self.rssVisibleCount(rssCount);_self.successStoryIndex(_self.successStoryIndex()%(successStoriesCount+1-_self.successStoryVisibleCount()));_self.rssIndex(_self.rssIndex()%(rssCount+1-_self.rssVisibleCount()))};setElementsVisibleCountsHandler=null;$(window).resize(function(){clearTimeout(setElementsVisibleCountsHandler);setElementsVisibleCountsHandler=setTimeout(function(){setElementsVisibleCounts()},600)});setElementsVisibleCounts();this.successStoryNext=function(){_self.successStoryIndex((_self.successStoryIndex()+1)%(successStoriesCount+1-_self.successStoryVisibleCount()))};this.successStoryPrev=function(){_self.successStoryIndex((_self.successStoryIndex()+3)%(successStoriesCount+1-_self.successStoryVisibleCount()))};this.rssNext=function(){_self.rssIndex((_self.rssIndex()+1)%(rssLimit+1-_self.rssVisibleCount()))};this.rssPrev=function(){_self.rssIndex((_self.rssIndex()+rssLimit-_self.rssVisibleCount())%(rssLimit+1-_self.rssVisibleCount()))};this.showConnectOptions=ko.observable(!1);this.professions=["Architect","Furniture Provider","Office Service Provider"];this.customProfession=ko.observable();this.selectedProfession=ko.observable();joinWithProfession=function(profession){LSHelper.Account.popUpSignIn({joinMessage:"Awesome! We’re adding more and more "+profession+"s to the network everyday! Signup here for updates!",redirectUrl:"/My/Liquidspace",popupParams:{mode:"join",profession:profession}})};this.profession=ko.computed(function(){var selectedProfession=_self.selectedProfession(),customProfession=_self.customProfession();return selectedProfession=selectedProfession&&selectedProfession.trim(),customProfession=customProfession&&customProfession.trim(),customProfession||selectedProfession});this.imaText=ko.computed(function(){var profession=_self.profession();return profession?"I am a "+profession:"I am a..."});this.selectProfession=function(profession){_self.showConnectOptions(!1);_self.customProfession(null);_self.selectedProfession(profession);joinWithProfession(profession)};this.connectLearnMore=function(){var profession=_self.profession()||"",professionLower=profession.toLowerCase();switch(professionLower){case"":window.location.href=params.howItWorksUrl;break;case"broker":window.location.href=params.brokerSignupUrl;break;case"investor":case"vc":window.location.href=params.investorSignupUrl;break;default:joinWithProfession(profession);break}};this.customProfessionKeyup=function(viewModel,event){event.keyCode==13&&_self.connectLearnMore()};this.PriceCalculatorViewModel=new LiquidSpace.View.PriceCalculatorViewModel(params.PriceCalculatorModel);this.PriceCalculatorViewModel.suggestedAddressSelected.subscribe(function(val){val&&$(window).width()<=525&&$("#shareSpaceForm").submit()});setTimeout(function(){$.ajax({cache:!0,url:"/home/blogposts",success:function(entries){entries=entries||[];_self.rssEntries(entries.slice(0,rssLimit).map(function(entry){var $description=$(entry.description.replace(/http:\/\//g,"https://")),image=$description.find("img").attr("src"),$encoded=entry.encoded&&$(entry.encoded.replace(/ src=".*"/g," ").replace("<\/p>","<\/p> ")),firstSentence=$encoded&&$encoded.text().split(". ")[0];return{title:entry.title,image:image,firstSentence:firstSentence?firstSentence+"…":"",link:entry.link.replace(/^http:\/\//,"https://")}}))}});params.loadWorkspaces&&$.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(params.SearchConfiguration),url:"/Home/HomeAvailableSpaces",success:function(result){result.newCity&&_self.city(result.newCity);_self.availableWorkspacesSearchUrl(result.showMoreUrl);$.each(result.workspaces,function(i,val){_self.availableWorkspaces.push(val)})}})},1e3);this.redirectToUrl=function(url){url&&(window.location.href=url)}};Home.IndexViewModelv15=function(params){var _self=this,rssLimit,scrollCheck;params=$.extend({},params);this.showIllustration=ko.observable(!1);this.scrollToTopVisible=ko.observable(!1);this.scrollToTop=function(){$(window).scrollTop(0)};rssLimit=4;this.rssEntries=ko.observableArray([]);this.signedUpForNewsShowMessage=ko.observable(!1);this.signUpEmail=ko.observable();this.signUpEmail.extend({email:!0});this.signUpForNews=function(){_self.signedUpForNewsShowMessage(!1);(User.id!=null||_self.signUpEmail.isValid())&&(LSHelper.HelperLib.blockUI(),$.ajax({url:"/account/registerfornewsletter",type:"POST",data:{email:_self.signUpEmail()},success:function(){_self.signedUpForNewsShowMessage(!0)},complete:function(){LSHelper.HelperLib.unblockUI()}}))};scrollCheck=function(){var scrollTop=$(window).scrollTop(),$illustration;_self.scrollToTopVisible(scrollTop>$(window).height());$illustration=$(".h15-simplebooking");scrollTop+$(window).height()>$illustration.offset().top+$illustration.height()&&_self.showIllustration(!0)};$(window).on("scroll",function(){scrollCheck()});scrollCheck();setTimeout(function(){$.ajax({cache:!0,url:"/home/blogposts",success:function(entries){entries=entries||[];_self.rssEntries(entries.slice(0,rssLimit).map(function(entry){var $description=$(entry.description.replace(/http:\/\//g,"https://")),image=$description.find("img").attr("src"),$encoded=entry.encoded&&$(entry.encoded.replace(/ src=".*"/g," ").replace("<\/p>","<\/p> ")),firstSentence=$encoded&&$encoded.text().split(". ")[0];return{title:entry.title,image:image,firstSentence:firstSentence?firstSentence+"…":"",link:entry.link.replace(/^http:\/\//,"https://")}}))}})},1e3)},function($){var RSS=function(target,url,options){this.target=target;this.url=url;this.html=[];this.options=jQuery.extend({ssl:!1,limit:null,key:null,template:"<ul>{entry}<li><a href='{url}'>[{author}@{date}] {title}<\/a><br/>{shortBodyPlain}<\/li>{/entry}<\/ul>",tokens:{}},options||{})};RSS.prototype.load=function(callback){var self=this,apiProtocol="http"+(self.options.ssl?"s":""),apiHost=apiProtocol+"://query.yahooapis.com/v1/public/yql",apiUrl=encodeURI(apiHost+"?format=json&q=select * from xml where url='"+self.url+"'");$.getJSON(apiUrl,callback)};RSS.prototype.render=function(){var self=this,templateMatch=self.options.template.match(/\{entry\}(.*)\{\/entry\}/),hasEntryTemplate=!!templateMatch,entryTemplate=hasEntryTemplate?templateMatch[1]:this.options.template;this.load(function(data){self.entries=data.query.results.rss.channel.item;jQuery(self.entries).each(function(){var entry=this,entryHTML=entryTemplate;self.isRelevant(entry)&&self.html.length<self.options.limit&&(jQuery(entryTemplate.match(/(\{.*?\})/g)).each(function(){var token=this.toString();entryHTML=entryHTML.replace(token,self.getValueForToken(token,entry))}),self.html.push(entryHTML))});var html=self.html.join("\n");html=hasEntryTemplate?self.options.template.replace(templateMatch[0],html):jQuery(html).length==0?jQuery("<div>"+html+"<\/div>"):jQuery(html);self.target.append(html)})};RSS.prototype.isRelevant=function(entry){var tokenMap=this.getTokenMap(entry);return this.options.filter?this.options.filterLimit&&this.options.filterLimit==this.html.length?!1:this.options.filter(entry,tokenMap):!0};RSS.prototype.getTokenMap=function(entry){return jQuery.extend({url:entry.link,author:entry.creator,date:entry.pubDate,title:entry.title,index:jQuery.inArray(entry,this.entries),totalEntries:this.entries.length,description:entry.description},this.options.tokens)};RSS.prototype.getValueForToken=function(_token,entry){var tokenMap=this.getTokenMap(entry),token=_token.replace(/[\{\}]/g,""),result=tokenMap[token];if(typeof result!="undefined")return typeof result=="function"?result(entry,tokenMap):result;else throw new Error("Unknown token: "+_token);};window.RSS=RSS;$.fn.rss=function(url,options){new RSS(this,url,options).render()}}(jQuery)